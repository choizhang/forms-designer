# Daily Paper #

### 6.21 ###
1. 同黄奎,吴忠一起将后面要实现的功能进行整理并输出
2. 预研ueditor的多视图实现

### 6.22 ###
1. 将代码部署到github上进行每日迭代记录
2. 明白ueditor在dialog是如何进行数据交付的
3. 之前的table只能通过右键选择对齐方式,现在可以实现在顶部工具栏实现
4. 让实际操作区域能跟容器保持一定间距(目前只支持写死固定值,后期要支持编辑可配置)

### 6.23 ###
1. 将组件域功能进行分解输出
2. 组件拖拽(利用图片本身可以拖拽的功能)
3. 文本域和重复表可以生成,文本域可以做resize(resize是使用ueditor默认的功能,只能使用单标签来实现)
4. 遗留了一个未解决的bug,图片焦点问题

### 6.24 ###
1. 昨天遗留的焦点问题,看了源码并未找到好的解决方案(应该是在获取单节点的地方有问题).不过找到另外的方案,选择图片之后再按ESC去取消焦点,再点击其他地方即可
2. 表格支持修改边框的粗细,样式
3. 表格边框的是否显示移动到表格属性设置里面,将粗细设置为0
4. 表格增加保持现状布局, 自适应布局bugfix


### 6.27 ###
1. 加入树形结构
2. 添加组件的同时实现树形结构自动变化
3. 之前的组件拖动是使用的图片,但是复杂组件不可能只使用单标签的图片,研究其他dom的拖拽,支持度都不如img好(未找到结果)

### 6.28 ###
1. 今天继续研究组件拖拽问题.目前已经实现组件全选然后拖拽到新位置.
2. (todo1) 在ueditor里面拖拽是copy的方式,不是move的,还未找到在哪里修改
3. (todo2) 要梳理工具的方向,要同formtalk,infopath等差异

### 6.29 ###
1. 实现了重复表和文本域的可拖动
2. 实现树形结构和组件点击的互相关联

### 6.30 ###
1. 对通过ueditor编辑生成的html代码进行了兼容性测试(结论: ueditor生成的代码还需要二次转化,比如将一些编辑器里面的功能去掉,将一些公用的样式要提取到一个文件里面)
2. (todo1) 表格默认生成的时候是没有设置值得,最后样式会缩到一起,如果手动拖拽了就会生成值,需要对默认做吹
3. 下午team buiding

### 7.1 ###
1. 整理此项目的介绍ppt,完成6.28中的todo2
2. 组件在拖拽之后不能马上进行高宽调节,~~目前需要多次操作或通过输入其他内容后去调节~~,已经解决,将contentchange回调里的hideDragLine注释了,不知道会不会有其他影响
3. 域结构加入了右键菜单(todo: 将插件的信息存入域结构中)

### 7.4 ###
1. 组件和域结构编辑联动
2. 能在编辑区中插入域结构中的组件
3. 直接拖拽非table的组件有问题,这里暂时还是用table,table内部可以用真实组件
4. 在拖拽会生成不必要的br和空格,还不知如何解决

### 7.5 ###
1. 对代码进行梳理
2. 多个组件要放到公共域
3. 如果组件完全删除要放到垃圾箱
4. (todo)组件的名称编辑是只能在域结构中还是编辑区也可以

### 7.6 ###
1. 研究ribbon布局如何实现

### 7.7 -- 7.8 ###
项目组集体调休

### 7.11 ###
1. 实现ribbon布局

### 7.12 ###
1. 解决在多tab下的ribbon布局
2. 录制制作简单表单的视频
3. 给组件后面添加标志图标并观察兼容性
4. 域结构中的视图默认是关闭的(bug)
5. ~~组件高亮状态并没有选中(bug)~~, 保持高亮和拖拽独立
5. 表格布局中的组件在表格设置了边框样式的时候被影响了(bug)
6. (todo)颜色组件要重构
7. (todo)单元格布局组件频率高
8. (todo)单行单列的最小值要设置
9. (todo)去掉表格默认的br标签
10. (todo)表格的行列设置需要弹窗输入值

### 7.13 ###
1. 添加了一个自定义的模板
2. 如果模板中带有组件,自动生成相应的域结构,并能保持正确的后续操作
    组件值得处理策略:
    1. 如果模板该组件没有值,则将组件名+系统变量作为名字
    2. 如果模板有值,则将该值作为名字
3. 让自定义的组件到任一tab中的任一位置去

### 7.14 ###
1. 添加模板自动添加相应的域结构
2. 开会过进度
3. 重新整理feature list
4. 能够引入打印样式控制

### 7.15 ###
1. 实现如果添加字体配置和默认字体的设置
2. 讨论出系统未安装字体的显示方案
3. 下午V5的产品发布会

### 7.18 ###
1. 解决未安装字体的显示问题
2. 域结构显示的bugfix
3. 区分了组件的高亮态和拖拽态

### 7.19 ###
1. 安装jsp环境,跟后台jsp调通
2. 实现单个图片,多个图片,视频,音频的正确上传
3. 表格设置为居中后,在预览模式下失效
4. 本地保存成功的提示信息隐藏,更换位置目前代码不好改

### 7.20 ###
1. 表格在修改边框样式后,再增加行列,样式不对
2. 在表格固定宽度后,如果插入重复表会撑开.这个没有办法,已经将重复表默认到最小了.用户如果要插入重复表应该预留大一些
3. 单元格添加了padding设置
4. 插入表格可以设置表格的宽度或者单元格的宽度
5. 点击选择按钮的时候,相应的域结构并没有高亮
6. 选中状态下,再点击组件内部,要更改为高亮态
7. 查看轻表单的项目代码,并评估"一键插入全部组件"的工作量.结论是,目前主要还是在pc表单设计器这块,有业余时间研究轻表单的代码.

### 7.21 ###
1. 插入背景图片的支持
2. 用户本地未安装字体帮助文档说明(由于win和mac的安装字体完全不同,情况太复杂.所以这里只考虑win,然而我们需要的字体windows都自带了)
3. 分页符在打印视图和预览视图的友好支持
4. 表格拖拽增加宽高流畅度解决,升级ueditor导致的


### 7.22 ###
1. 图片添加可以拖拽高宽的效果
2. 页眉页脚效果(20%)
3. (todo)表格设置背景色,然后再右键点击bug,不太好解决

### 7.25 ###
1. 页眉页脚插入删除,在插入分页符自动增加.
2. 页眉页脚简易的模板模块设计
3. 页眉页脚在多视图中统一设置
4. 表单具体单元格权限设计(根据权限来显示隐藏)(20%)

### 7.26 ###
1. 页眉页脚在多视图中统一设置(目前各个tab是独立的,而且一旦联动修改了,就不能单独改了),目前暂时单独设置
2. 表单具体单元格权限设计(根据权限来显示隐藏)
3. (todo)用户编辑过的页眉页脚可以保存到系统方便下次使用(需要用户登录系统,后台支持)

### 7.27 ###
1. 跟辛裴讨论cmp history模块的处理ajax弹窗的方法,将之前的demo文档添加了功能说明
2. 跟黄奎勾兑表单设计器导出数据格式（黄奎出差，下周回，不过拿到了之前的格式，先研究下）
3. 对表格右键菜单内容做优化(目前右键承载功能太多,且很多低频功能)
4. 优化罗宾布局，实现类似百度doc的UI结构（60%）

### 7.28 ###
1. 完成罗宾布局的UI结构(完成了表格tab,后续其他tab再跟UI配合)
2. 将系统中的域结构生成json格式的
3. 研究多视图中，html如何导出
4. 视图的权限设计

### 7.29 ###
1. 表格行高/列宽设置（最小值，固定值）
2. 域结构点击x关闭,视图也要删除.视图在域结构没有删除功能
3. dialog加载体验优化(是用iframe外联css的方式,在本地有css闪烁的情况,但是在外网络环境此bug不存在)

### 8.1 ###
1. 视图中间距调整优化(视图的间距要不要,打印可以配置)
2. 在拖拽或者聚焦失焦的时候，会乱入无宽度空格（\u200B, &#8203;），尝试了修复措施，但是时候修复对体验影响很糟糕，研究很久并未找到很好的解决方案
3. 研究组件本身的样式修改模块的设计(50%)
4. 取消视图tab中的数字标志,很难维护

### 8.2 ###
1. 继续尝试处理无宽度空格问题
2. 跟黄奎讨论下目前工具发展的进度和一些体验优化

### 8.3 ###
1. 开通204服务器的权限
2. 跟戴毅讨论之前infopath导出所用到的信息并制定本系统交互的数据格式
3. 将之前CAP的所有组件迁移到系统中
4. 视图中的组件通过各种原因删除了,域结构中提供一个刷新按钮可以校对
5. 将域结构导出所需格式
6. 将视图html导出
7. 修改权限多选的bug
8. 后端提供模板保存的接口(或者使用本地存储?)

组件样式设置:

1. 组件的高宽通过拖拽的方式生成
2. 颜色,字体大小


bug:

单元格设置背景后,点击右键,结果背景颜色样式去掉了
给单元格设置了padding后,拖拽组件去其他单元格,结果padding设置没有了(如果单元格中一直有br就不会有这个bug)(是不是js发现单元格没有内容做了清理操作)

权限规则:

1. 如果对非整行做权限设计,则将操作列的内容隐藏但占位

2. 如果是对整行做权限设计,则将整行内容隐藏不占位

3. 选择整列的时候,内容隐藏但占位(因为不占位不好实现,而且从需求出发占位比较好)

重复表:

重复表最开始要确定好文本域的数量,不然后期添加域结构有问题,而且也不统一


